<div class="hero-wrapper small-12 medium-12 large-12 columns">
  <div class="row">
  <h3>My Destinations</h3>
    <div id="map"></div>
    <div class="pins"><%= image_tag "map-pin-red.svg" %> Places I've Been</div>
  </div>
</div>

<div class="row">
  <div class="user small-12 medium-5 large-5 columns">
    <div class="thumb profile_pic">
    <%= image_tag @user.profile_pic_url(:thumb) %>
    </div>
    <h4><%= @user.name %></h4>
    <h5>Home Base: <%= @user.location %></h5>
  </div>
  <div class="user small-12 medium-6 large-5 columns">
    <h5>About</h5>
      <p><%= @user.bio %></p>
        <div class="user small-12 medium-6 large-5 columns">
          <h5><%= link_to 'Followers', users_path %>: <%= @user.inverse_friends.length %> </h5>
        </div>
        <div class="user small-12 medium-6 large-5 columns">
          <h5><%= link_to 'Following', activities_path %>: <%= @user.friendships.length %></h5>
        </div>
  </div>
</div>

<div class="gridler">
  <div class="row">
    <ul class="small-block-grid-1 medium-block-grid-4 large-block-grid-5">
      <% @user.destinations.reverse_each do |dest| %>
        <li class="destination-grid">
          <h5><%= "#{dest.city}, #{dest.country}" %></h5>
          <span class="medium"><%= image_tag dest.album_url(:medium) %></span>
          <p><%= dest.snippet %>
          <% if dest.posts.first %>
          <p>Activity: <%= dest.posts.first.thing %></p>
            <p><%= dest.posts.first.description %></p>
          <% else %>
            <no content>
          <% end %>
          <%= link_to 'Read More', user_destination_path(@user.id, dest) %></p>
        </li>
      <% end %>
    </ul>
  </div>
</div>

<% content_for :javascript do %>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["MAPS_API_KEY"] %>&amp;sensor=false">
  </script>
  <script>
    (function () {
      function initialize() {
        var mapOptions = {
        center: new google.maps.LatLng(30.0000, 10.0000),
        zoom: 2
        };
        var map = new google.maps.Map(document.getElementById("map"), mapOptions);

        var latlng = <%= raw @lat_lngs.to_json %>;
        for(var i = 0; i < latlng.length; i++) {
          var coord = latlng[i];

          var myLatlng = new google.maps.LatLng(coord['lat'], coord['lng']);

          var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            animation: google.maps.Animation.DROP,
            draggable: false
          });
        }
      };
      google.maps.event.addDomListener(window, 'load', initialize);
    })();
  </script>
<% end %>






