.destination.small-12.medium-10.large-9.columns
  %p
    = image_tag @destination.album_url(:large)
  %h3
    = "#{@destination.city}, #{@destination.country}"
  %p
    = @destination.description
  %p
    %b Tags:
    = @destination.category

  .row
    - if @user == current_user
      .button-bar
        %ul.button-group
          %li.tiny.button
            = link_to 'Edit Destination', edit_user_destination_path(@user.id, @destination)
          %li.tiny.button
            = link_to 'Delete Destination', user_destination_path(@user.id, @destination.id), method: :delete, data: { confirm: 'Are you sure?' }
          %li.tiny.button
            = link_to 'My Profile', user_path(@user)
          %li.tiny.button.accordion
            = link_to 'Add a Post', '#'

  .post-form
    %form.new-post
      %fieldset
        %legend Add A Post
        .row
          .large-3.columns
            %label Activity
            %textarea.activity{rows: "2", cols: "30"}

          .large-3.columns
            %label Description
            %textarea.description{rows: "10", cols: "30"}

          .large-3.columns
            %label External Links
            %textarea.external_links{rows: "5", cols: "30"}

          .large-3.columns
            %label Images
            %input.images{id: "fileInput", type: "file"}

          %input.id{type: "hidden"}

          %input{type: "submit", value: "Add Post"}
  .post-wall
    - @destination.posts.each do |p|
      .row
        .album.small-3.medium-4.large-3.columns.thumb
          = image_tag "world.png"
        .small-9.medium-8.large-9.columns
          %h5= p.activity
          %p= p.description
          - if p.external_links 
            = link_to p.external_links, p.external_links
          = render partial: 'comments/comment', locals: { p: p }
  #templates
    %script{type: "text/template", class: "post"}
      .row.post-template
        .album.small-3.medium-4.large-6.columns.thumb
          = image_tag "world.png"
        .small-9.medium-8.large-6.columns
          %h5 {activity}
          %p {description}
          = link_to "{external_links}", "{external_links}"
          = form_for Comment.new, remote: true do |f|
  
            .field
              = f.text_field :text, :placeholder => "Add a Comment"

              = hidden_field_tag 'comment[post_id]', '{ id }'

            .actions
              = f.submit 'Save'

- content_for :javascript do


  :javascript
    (function () {
    var destinationPosts = new Post();

    var formPresenter = new PostForm({root: $('form.new-post'), posts: destinationPosts});

    var wallPresenter = new PostWall ({root: $('.post-wall'), posts: destinationPosts});

    var serverPosts = #{raw @destination.posts.to_json};

    })();

    window.g = {};
    g.destinationPostsUrl = "#{destination_post_api_path(destination_id: @destination)}";




